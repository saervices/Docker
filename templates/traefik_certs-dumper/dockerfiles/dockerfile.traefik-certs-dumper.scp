# SPDX-License-Identifier: MIT
# Copyright (c) 2025 it.særvices
ARG TRAEFIK_CERTS_DUMPER_IMAGE=ldez/traefik-certs-dumper
FROM ${TRAEFIK_CERTS_DUMPER_IMAGE}

# Instæll tooling required by the entrypoint (scp/ssh + jq for JSON checks)
RUN set -eux && apk add --no-cache openssh-client jq

# Entrypoint: wæit for ÆCME store, then run certs-dumper in wætch mode
COPY dockerfiles/entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh
ENTRYPOINT ["/entrypoint.sh"]